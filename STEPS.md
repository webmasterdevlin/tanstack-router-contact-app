# Steps in building the project from the starter repo

## Setting up the routes

- [x] download the starter repo
- [x] npm install
- [x] create a folder named `routes` inside the `src` folder
- [x] create a file named `__root.tsx` inside the `routes` folder
```tsx
import { createRootRoute } from "@tanstack/react-router";

export const Route = createRootRoute({
    component: RootComponent
});

function RootComponent() {
    return (
        <div>
            <h1>Hello from React and TanStack Router</h1>
        </div>
    );
}
```
- [x] import and add `TanStackRouterVite()` in vite.config.ts's `plugins` array
- [x] install TanStack Router CLI
```bash
npm i -g @tanstack/router-cli
``` 
- [x] run the TanStack Router CLI to generate `routeTree.gen.ts` file
```bash
tsr generate
```
The tsr generate command will generate a `routeTree.gen.ts` file in the `src` folder. Normally in React Router, we would have to manually create the routes and nested routes. But with TanStack Router, we can generate the routes and nested routes using the CLI.
- [x] run the tsr watcher to watch for changes in the `routeTree.gen.ts` file
```bash
tsr watch
```
- [x] run the project
```bash
npm run dev
```
- [x] finish the `App.tsx` file to integrate the typesafe routes.
- [x] add an `index.tsx` file inside the `routes` folder. This file will be the entry point for the routes and boilerplate will be generated by the CLI for you.
- [x] update the `__root.tsx` file to add the `Outlet` component.
```tsx
<>
  <div id="detail">
    <Outlet />
  </div>
</>
```
- [x] see the changes in the browser

## Adding the TanStack Router Devtools

- [x] update the `__root.tsx` file to add the `TanStackRouterDevtools` component.
```tsx
const TanStackRouterDevtools =
  process.env.NODE_ENV === 'production'
    ? () => null // Render nothing in production
    : lazy(() =>
        // Lazy load in development
        import('@tanstack/router-devtools').then((res) => ({
          default: res.TanStackRouterDevtools,
          // For Embedded Mode
          // default: res.TanStackRouterDevtoolsPanel
        }))
      );
```
 - [x] then above the RootComponent function, add the following code:
```tsx
<>
  <div id="detail">
    <Outlet />
  </div>
  <Suspense>
    <TanStackRouterDevtools position="bottom-right" />
  </Suspense>
</>
```
- [x] see the changes in the browser

## Adding New Contact functionality

- [x] update the `__root.tsx` file to add sidebar and the list of contacts.
```tsx
<>
  <div id="sidebar">
    <SidebarFooter />
  </div>
  <div id="detail">
    <Outlet />
  </div>
  <Suspense>
    <TanStackRouterDevtools position="bottom-right" />
  </Suspense>
</>
```
- [x] import and place the `<SidebarSearchContact />` below the SideBarFooter component.
```tsx
<SidebarSearchContact />
```

- [x] update the `RootRouteOptions` of the `__root.tsx` file.
```tsx
export const Route = createRootRoute({
  component: RootComponent,
  validateSearch: z.object({
    q: z.string().optional(),
  }),
  // eslint-disable-next-line sort-keys-fix/sort-keys-fix
  loaderDeps: ({ search: { q } }) => {
    return { q };
  },
  // eslint-disable-next-line sort-keys-fix/sort-keys-fix
  loader: async ({ deps: { q } }) => {
    const contacts = (await getContacts(q || '')) as Contact[];

    return { contacts, q };
  },
});
```